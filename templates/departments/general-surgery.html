{% extends "base.html" %}

{% block title %}Best General Surgery Hospital in Bangalore | Aarogya Hastha{% endblock %}

{% block head %}
{{ super() }}
<meta name="description"
    content="Aarogya Hastha offers advanced general surgery in Bangalore with expert surgeons, modern facilities, and compassionate care for faster recovery.">
<meta name="keywords" content="">
<meta name="author" content="Aarogyahastha Pvt Ltd">
<meta name="designer" content="Aarogyahastha Pvt Ltd">
<link rel="canonical" href="https://aarogyahastha.com/departments/general-surgery" />
<meta name="no-email-collection" content="http://www.unspam.com/noemailcollection/">
<meta name="google-site-verification" content="T3QqCQjcJP8HqwIYaCHz3AZHCSXJDF-NJfE8GNiSb-Q" />
<meta name="robots" content="index,follow">
<meta name="revisit-after" content="7 days">
<meta name="distribution" content="web">
<meta name="robots" content="noodp">
<meta name="web_author" content="Aarogyahastha Pvt Ltd">
<meta name="rating" content="general">
<meta name="rating" content="safe for kids">
<meta name="subject" content="Healthcare">
<meta name="copyright" content="Copyright © 2025">
<meta name="reply-to" content="info@aarogyahastha.com">
<meta name="abstract"
    content="We provide timely and specialized medical attention for patients experiencing life-threatening conditions, ensuring their urgent needs are met with the highest level of care.">
<meta name="city" content="Bangalore">
<meta name="country" content="India">
<meta name="distribution" content="global">
<meta name="classification" content="Healthcare, Hospital">
<base href="/">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
{% endblock %}
{% block content %}
<style>
    .breadcrumb-section {
        padding: 10px 0;
        background-color: #f8f9fa;
    }

    .breadcrumb {
        margin-bottom: 0;
        padding: 0.75rem 1rem;
    }

    .breadcrumb-item+.breadcrumb-item::before {
        content: ">>";
        padding: 0 0.5rem;
    }

    .breadcrumb-item a {
        color: #007bff;
        text-decoration: none;
    }

    .breadcrumb-item.active {
        color: #6c757d;
    }
</style>
<section class="breadcrumb-section">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/departments/">Departments</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ department.name }}</li>
            </ol>
        </nav>
    </div>
</section>
</section>
<section class="department-banner" data-aos="fade-up" data-aos-offset="300" data-aos-easing="ease-in-sine">
    <div class="container">
        <div class="banner" style="position: relative;">
            {% if department.banner_path %}
            <img loading="lazy" src="{{ url_for('static', filename=department.banner_path) }}"
                alt="{{ department.banner_alt_text or department.name }}"
                style="width: 100%; height: 400px; object-fit: cover;">
            {% else %}
            <img loading="lazy" src="/static/img/banners/default.jpg"
                alt="{{ department.banner_alt_text or department.name }}"
                style="width: 100%; height: 400px; object-fit: cover;">
            {% endif %}

            <div class="banner-content-transparent">
                <div class="transparent-container">
                    <div class="text-content">
                        <h1>{{ department.name }}</h1>
                        <p>{{ department.description }}</p>
                    </div>
                    <div class="banner-buttons-transparent">
                        <a href="https://app.fyndbetter.com/ahh_apt" target="_blank"
                            class="btn btn-appointment-transparent">
                            <i class="fas fa-calendar-check me-1"></i>Book Now
                        </a>
                        <a href="tel:+080 6666 8811" class="btn btn-call-transparent">
                            <i class="fas fa-phone me-1"></i>Call Us
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Overview -->
<div class="container my-5">
    <ul class="nav nav-tabs" id="departmentTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active fw-bold text-dark" id="overview-tab" data-bs-toggle="tab"
                data-bs-target="#overview-tab-pane" type="button" role="tab" aria-controls="overview-tab-pane"
                aria-selected="true">Overview</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link fw-bold text-dark" id="services-tab" data-bs-toggle="tab"
                data-bs-target="#services-tab-pane" type="button" role="tab" aria-controls="services-tab-pane"
                aria-selected="false">Our Services</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link fw-bold text-dark" id="specialists-tab" data-bs-toggle="tab"
                data-bs-target="#specialists-tab-pane" type="button" role="tab" aria-controls="specialists-tab-pane"
                aria-selected="false">Our Specialists</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link fw-bold text-dark" id="blog-tab" data-bs-toggle="tab"
                data-bs-target="#blog-tab-pane" type="button" role="tab" aria-controls="blog-tab-pane"
                aria-selected="false">Blog</button>

        </li>
    </ul>

    <div class="tab-content" id="departmentTabsContent">

        <div class="tab-pane fade show active" id="overview-tab-pane" role="tabpanel" aria-labelledby="overview-tab">
            <section data-aos="fade-up" class="py-2"> <!-- Reduced py-4 to py-2 -->
                {% if overview %}

                <!-- Transparent Container -->
                <div class="bg-transparent border border-gray-200 rounded-lg p-4 backdrop-blur-sm">
                    <!-- Reduced p-6 to p-4 -->

                    <!-- Quote Section -->
                    {% if overview.quote %}
                    <blockquote class="relative border-l-4 border-blue-400 pl-4 italic text-gray-700 text-base mb-2">
                        <!-- Reduced to mb-2 -->
                        <p class="mb-1 text-lg font-medium text-gray-800">"{{ overview.quote }}"</p>
                        <!-- Reduced mb-2 to mb-1 -->
                        {% if overview.quote_author %}
                        <footer class="text-right text-sm font-medium text-gray-500 mt-1">— {{ overview.quote_author }}
                        </footer> <!-- Added mt-1 -->
                        {% endif %}
                    </blockquote>
                    {% endif %}

                    <!-- Content Paragraphs -->
                    <div class="text-gray-800 leading-relaxed mb-2"> <!-- Reduced to mb-2 -->
                        {% for para in overview.content.split('</p>') if para.strip() %}
                        {% set para_clean = para.replace('<p>', '').strip() %}
                            {% if para_clean %}
                        <p class="mb-2 first-letter:text-2xl first-letter:font-bold first-letter:text-blue-500">
                            <!-- Reduced mb-4 to mb-2 -->
                            {{ para_clean | safe }}
                        </p>
                        {% endif %}
                        {% endfor %}
                    </div>

                    <!-- Testimonials Section -->
                    {% if testimonials %}
                    <div class="mt-2"> <!-- Changed mb-4 to mt-2 and removed bottom margin -->
                        <h3 class="section-header mb-2 text-lg">Testimonials</h3>
                        <!-- Reduced margin and smaller font -->
                        <div class="testimonials-grid mt-2"> <!-- Added mt-2 -->
                            {% for testimonial in testimonials %}
                            <div class="testimonial-card {{ ['blue', 'green', 'purple'][loop.index0 % 3] }}">
                                <div class="testimonial-header">
                                    <div
                                        class="testimonial-avatar avatar-{{ ['blue', 'green', 'purple'][loop.index0 % 3] }}">
                                        {{ testimonial.name[:2].upper() }}
                                    </div>
                                    <div class="testimonial-info">
                                        <h4 class="text-sm">{{ testimonial.name }}</h4> <!-- Smaller text -->
                                    </div>
                                </div>

                                <div class="testimonial-content">
                                    <p class="testimonial-text text-sm">"{{ testimonial.comment }}"</p>
                                    <!-- Smaller text -->
                                </div>

                                <div class="testimonial-actions">
                                    <div class="testimonial-rating text-base"> <!-- Adjusted star size -->
                                        {{ '★' * testimonial.rating }}{{ '☆' * (5 - testimonial.rating) }}
                                    </div>
                                    <button class="view-more-btn text-xs" style="display: none;">View More</button>
                                    <!-- Smaller button -->
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    <style>
                        .section-header {
                            border: none !important;
                            /* remove borders */
                            text-decoration: none !important;
                            /* remove underlines */
                            box-shadow: none !important;
                            /* remove any shadow underlines */
                            color: #2c3e50;
                            /* keep text color */
                            font-weight: 600;
                            margin-bottom: 1rem;
                        }

                        .section-header a {
                            text-decoration: none !important;
                            /* remove underline if inside a link */
                            color: inherit;
                            /* keep text color */
                        }

                        .section-header::after,
                        .section-header::before {
                            content: none !important;
                            /* remove pseudo-elements */
                        }
                    </style>
                    <!-- FAQ Section -->
                    <!-- FAQ Section -->
                    {% if faqs %}
                    <div class="faq-section">
                        <h3 class="section-header">Frequently Asked Questions</h3>
                        <div class="faq-container">
                            {% for faq in faqs %}
                            <div class="faq-item">
                                <button class="faq-question">
                                    <span class="faq-question-text">{{ faq.question }}</span>
                                    <svg class="faq-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M19 9l-7 7-7-7"></path>
                                    </svg>
                                </button>
                                <div class="faq-answer">
                                    {{ faq.answer|replace('
                                    ', '<br>')|safe }}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}


                </div>

                {% else %}
                <div class="bg-transparent border border-gray-200 rounded-lg p-6 backdrop-blur-sm">
                    <p class="text-gray-400 italic text-center py-2">No overview available.</p>
                </div>
                {% endif %}
            </section>
        </div>

        <style>
            /* Testimonials Section Styles */
            .testimonials-grid {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1.5rem;
                margin-bottom: 2rem;
            }

            @media (min-width: 768px) {
                .testimonials-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
            }

            @media (min-width: 1024px) {
                .testimonials-grid {
                    grid-template-columns: repeat(3, 1fr);
                }
            }

            .testimonial-card {
                background: #ffffff;
                border-radius: 0.5rem;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                padding: 1.5rem;
                border: 1px solid #f0f0f0;
                transition: all 0.3s ease;
                position: relative;
                display: flex;
                flex-direction: column;
            }

            .testimonial-card:hover {
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
                transform: translateY(-2px);
                border-color: #e5e5e5;
            }

            .testimonial-card::before {
                content: '"';
                position: absolute;
                top: 1rem;
                left: 1.5rem;
                font-size: 3rem;
                color: #f8f8f8;
                font-family: Georgia, serif;
                line-height: 1;
                z-index: 1;
            }

            .testimonial-header {
                display: flex;
                align-items: center;
                margin-bottom: 1rem;
                position: relative;
                z-index: 2;
            }

            .testimonial-avatar {
                width: 2.5rem;
                height: 2.5rem;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-right: 1rem;
                font-weight: 600;
                font-size: 0.875rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
            }

            .testimonial-info h4 {
                font-weight: 600;
                color: #2d3748;
                margin: 0 0 0.25rem 0;
                font-size: 1rem;
                font-family: 'Inter', sans-serif;
            }

            .testimonial-info p {
                color: #718096;
                margin: 0;
                font-size: 0.875rem;
                font-weight: 400;
            }

            .testimonial-content {
                position: relative;
                z-index: 2;
                flex: 1;
            }

            .testimonial-text {
                color: #4a5568;
                line-height: 1.6;
                font-style: normal;
                font-size: 0.95rem;
                margin-bottom: 1rem;
                display: -webkit-box;
                -webkit-line-clamp: 4;
                /* Show only 4 lines initially */
                -webkit-box-orient: vertical;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .testimonial-text.expanded {
                -webkit-line-clamp: unset;
                display: block;
            }

            /* Gradient fade effect for truncated text */
            .testimonial-text:not(.expanded)::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                height: 2rem;
                background: linear-gradient(transparent, white);
                pointer-events: none;
            }

            .testimonial-actions {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: auto;
                padding-top: 0.5rem;
                border-top: 1px solid #f7f7f7;
            }

            .testimonial-rating {
                display: flex;
                color: #fbbf24;
                font-size: 3rem;
                gap: 0.1rem;
            }

            .view-more-btn {
                background: none;
                border: none;
                color: #667eea;
                font-size: 0.875rem;
                font-weight: 500;
                cursor: pointer;
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
                transition: all 0.2s ease;
                text-decoration: underline;
            }

            .view-more-btn:hover {
                color: #5a67d8;
                background: #f7fafc;
            }

            .view-more-btn:focus {
                outline: 2px solid #667eea;
                outline-offset: 2px;
            }

            /* Minimal color variations */
            .testimonial-card.cardiology {
                border-left: 3px solid #e53e3e;
            }

            .testimonial-card.orthopedics {
                border-left: 3px solid #3182ce;
            }

            .testimonial-card.neurology {
                border-left: 3px solid #805ad5;
            }

            .testimonial-card.general {
                border-left: 3px solid #38a169;
            }

            /* FAQ Section Styles */
            .faq-section {
                background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 100%);
                border-radius: 0.75rem;
                padding: 1.5rem;
                border: 1px solid #e5e7eb;
            }

            .faq-container {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .faq-item {
                background: white;
                border-radius: 0.5rem;
                box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
                border: 1px solid #f3f4f6;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .faq-item:hover {
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            }

            .faq-question {
                width: 100%;
                text-align: left;
                padding: 1rem;
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: none;
                border: none;
                cursor: pointer;
                transition: background-color 0.2s ease;
            }

            .faq-question:hover {
                background-color: #f9fafb;
            }

            .faq-question-text {
                font-weight: 600;
                color: #1f2937;
                font-size: 1rem;
            }

            .faq-icon {
                width: 1.25rem;
                height: 1.25rem;
                color: #6b7280;
                transform: rotate(0deg);
                transition: transform 0.3s ease;
            }

            .faq-icon.rotated {
                transform: rotate(180deg);
            }

            .faq-answer {
                padding: 1rem;
                background-color: #f9fafb;
                border-top: 1px solid #e5e7eb;
                color: #4b5563;
                line-height: 1.6;
                display: none;
            }

            .faq-answer.show {
                display: block;
                animation: fadeIn 0.3s ease-in-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Section Headers */
            .section-header {
                font-size: 1.5rem;
                font-weight: bold;
                color: #1f2937;
                text-align: center;
                margin-bottom: 1.5rem;
                position: relative;
            }

            .section-header::after {
                content: '';
                position: absolute;
                bottom: -0.5rem;
                left: 50%;
                transform: translateX(-50%);
                width: 60px;
                height: 3px;
                background: linear-gradient(90deg, #3b82f6, #8b5cf6);
                border-radius: 2px;
            }
        </style>

        <script>
            // FAQ Accordion functionality
            document.addEventListener('DOMContentLoaded', function () {
                const faqQuestions = document.querySelectorAll('.faq-question');

                faqQuestions.forEach(question => {
                    question.addEventListener('click', function () {
                        const answer = this.nextElementSibling;
                        const icon = this.querySelector('.faq-icon');

                        // Toggle current item
                        if (answer.style.display === 'block') {
                            answer.style.display = 'none';
                            icon.classList.remove('rotated');
                        } else {
                            answer.style.display = 'block';
                            icon.classList.add('rotated');
                        }

                        // Close other FAQ items
                        faqQuestions.forEach(otherQuestion => {
                            if (otherQuestion !== question) {
                                const otherAnswer = otherQuestion.nextElementSibling;
                                const otherIcon = otherQuestion.querySelector('.faq-icon');
                                otherAnswer.style.display = 'none';
                                otherIcon.classList.remove('rotated');
                            }
                        });
                    });

                    // Initially hide all FAQ answers
                    question.nextElementSibling.style.display = 'none';
                });
            });
            // Testimonial view more functionality
            document.addEventListener('DOMContentLoaded', function () {
                const testimonialCards = document.querySelectorAll('.testimonial-card');

                testimonialCards.forEach(card => {
                    const textElement = card.querySelector('.testimonial-text');
                    const viewMoreBtn = card.querySelector('.view-more-btn');

                    if (textElement && viewMoreBtn) {
                        // Check if text needs truncation
                        const lineHeight = parseInt(getComputedStyle(textElement).lineHeight);
                        const maxHeight = lineHeight * 4; // 4 lines

                        if (textElement.scrollHeight > maxHeight) {
                            viewMoreBtn.style.display = 'block';

                            viewMoreBtn.addEventListener('click', function () {
                                textElement.classList.toggle('expanded');

                                if (textElement.classList.contains('expanded')) {
                                    viewMoreBtn.textContent = 'View Less';
                                } else {
                                    viewMoreBtn.textContent = 'View More';
                                }
                            });
                        } else {
                            viewMoreBtn.style.display = 'none';
                        }
                    }
                });
            });
        </script>

        <div class="tab-pane fade" id="services-tab-pane" role="tabpanel" aria-labelledby="services-tab">
            <section class="department-section py-4">
                <h2>Conditions Treated by Our {{ department.name }} Specialists</h2>
                <div class="row g-4">
                    {% for service in services %}
                    <div class="col-md-6">
                        <div class="card h-100 p-3">
                            {% if service.icon_path %}
                            <img src="{{ url_for('static', filename=service.icon_path) }}" alt="{{ service.title }}"
                                class="card-img-top" style="max-width: 60px;">
                            {% endif %}
                            <div class="card-body">
                                <h4 class="card-title text-dark-blue">{{ service.title }}</h4>
                                {% if service.list_items %}
                                <ul class="card-text list-unstyled">
                                    {% for item in service.get_list_items() %}
                                    <li><i class="fas fa-check-circle text-success me-2"></i>{{ item }}</li>
                                    {% endfor %}
                                </ul>
                                {% endif %}
                                <p class="card-text">{{ service.description }}</p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <!-- ✅ SERVICES OVERVIEW SECTION - Show first service that has overview content BELOW services -->
                {% set found_overview = false %}
                {% for service in services %}
                {% if service.services_overview and not found_overview %}
                <div class="services-overview-section mt-5">
                    <div class="bg-light p-4 rounded">
                        {{ service.services_overview|safe }}
                    </div>
                </div>
                {% set found_overview = true %}
                {% endif %}
                {% endfor %}
            </section>
        </div>

        <div class="tab-pane fade" id="specialists-tab-pane" role="tabpanel" aria-labelledby="specialists-tab">
            <section class="py-4">
                {% if department.specialists_heading or department.specialists_content %}
                <div class="specialists-header mb-4">
                    {% if department.specialists_heading %}
                    <h2 class="section-title text-center mb-3" style="text-decoration: none; border-bottom: none;">{{
                        department.specialists_heading }}</h2>
                    {% endif %}
                    {% if department.specialists_content %}
                    <div class="specialists-content text-center mb-4">
                        {{ department.specialists_content|safe }}
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <div id="specialists-list" class="appointment-section">
                    <div class="row g-3">
                        {% set ns = namespace(has_doctors=False) %}

                        {% for doctor in doctors %}
                        {% if doctor.is_active %}
                        {% set ns.has_doctors = True %}
                        <div class="col-lg-6 specialist-item" data-specialist="{{ doctor.slug }}">
                            <div class="specialist-card">
                                <div class="img-box">
                                    {% if doctor.image_path %}
                                    <img class="img-fluid" src="{{ url_for('static', filename=doctor.image_path) }}"
                                        alt="{{ doctor.name }}">
                                    {% else %}
                                    <img class="img-fluid"
                                        src="{{ url_for('static', filename='img/default-doctor.jpg') }}" alt="No Image">
                                    {% endif %}
                                </div>
                                <div class="content">
                                    <h3>{{ doctor.name }}</h3>
                                    <h4>{{ doctor.specialization }}</h4>
                                    {% if doctor.day_from and doctor.day_to and doctor.time_from_hour %}
                                    <p class="details">
                                        <b>Timings:</b>
                                        {{ doctor.day_from }} - {{ doctor.day_to }},
                                        {{ doctor.time_from_hour }}:{{ doctor.time_from_min }} {{ doctor.time_from_ampm
                                        }} -
                                        {{ doctor.time_to_hour }}:{{ doctor.time_to_min }} {{ doctor.time_to_ampm }}
                                    </p>
                                    {% endif %}
                                    <a class="book-btn" target="_blank"
                                        href="{{ doctor.appointment_link or 'https://app.fyndbetter.com/ahh_apt' }}">
                                        BOOK APPOINTMENT
                                    </a>
                                    <a href="{{ url_for('doctor_detail', slug=doctor.slug) }}"
                                        class="action-btn profile-btn">View
                                        Profile</a>

                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}

                        {% if not ns.has_doctors %}
                        <div class="col-12">
                            <div class="alert alert-warning">
                                No specialists found for this department.
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </section>
        </div>
        <style>
            /* Remove any underline or decorative line from department specialists heading */
            #specialists-tab-pane .section-title,
            #specialists-tab-pane .section-title::after,
            #specialists-tab-pane .section-title::before {
                all: unset;
                display: block;
                font-size: 2rem;
                font-weight: 600;
                text-align: center;
                color: #000;
                /* set your desired color */
                margin-bottom: 1rem;
            }
        </style>



        <div class="tab-pane fade" id="blog-tab-pane" role="tabpanel" aria-labelledby="blog-tab">
            <section class="py-4">
                <div class="container">
                    <h2 class="text-center mb-4 fw-bold text-dark">Latest Blog from {{ department.name }}</h2>

                    {% if blogs %}
                    <section class="blogs-section py-5">
                        <div class="container">
                            <div class="blogs-grid square">
                                {% set latest_blog = blogs[0] %}
                                <div class="blog-card square">
                                    <div class="blog-image">
                                        {% if latest_blog.image_path %}
                                        <img src="{{ url_for('static', filename=latest_blog.image_path) }}"
                                            alt="{{ latest_blog.title }}">
                                        {% else %}
                                        <img src="{{ url_for('static', filename='img/blogs/default-blog.jpg') }}"
                                            alt="{{ latest_blog.title }}">
                                        {% endif %}
                                    </div>
                                    <div class="blog-content">
                                        <h3 class="blog-title">{{ latest_blog.title }}</h3>
                                        <div class="read-more-container">
                                            <a href="{{ url_for('blog_detail', slug=latest_blog.slug) }}"
                                                class="read-more-btn">
                                                Read More
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    {% else %}
                    <div class="alert alert-info text-center mt-4">
                        No blog posts available for this department.
                    </div>
                    {% endif %}
                </div>
            </section>
        </div>
    </div>
</div>
<style>
    .blogs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(18.75rem, 1fr));
        gap: var(--space-lg);
        padding: var(--space-xl) var(--space-md);
        max-width: 75rem;
        margin: 0 auto;
    }

    .blog-card {
        background: var(--color-white);
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        border: 1px solid #f0f0f0;
        display: flex;
        flex-direction: column;
        width: 24rem;
        /* ⬅️ Reduced width */
        height: 25rem;
        /* Keeps the taller card look */
        margin: 0 auto;

        transition: all 0.3s ease;
    }





    .blog-image {
        width: 18rem;
        height: 12rem;
        margin: 1.25rem auto 1rem auto;
        overflow: hidden;
        background: var(--color-background-light);

    }

    .blog-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;

    }


    .blog-content {
        padding: 0 var(--space-md) var(--space-md) var(--space-md);
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .blog-title {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--color-secondary);
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        margin: 0;
        text-align: center;
    }

    .blog-date {
        font-size: 0.9rem;
        color: var(--color-text);
        font-weight: 500;
        margin: 0;
        text-align: center;
    }

    .read-more-container {
        margin-top: 0.5rem;
        /* reduced from 'auto' to bring it up */
    }

    .read-more-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ffffff;
        /* White text */
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9rem;
        padding: 0.5rem 0;
        width: 50%;
        border: 2px solid #16979D;
        /* matching gradient start */
        background: linear-gradient(to bottom, #16979D, #103A60);
        /* Gradient background */
        transition: all 0.3s ease;
        margin: 0.5rem auto 0;
        /* Top margin reduced to move up */
        border-radius: 6px;
    }



    .read-more-btn:hover {
        background: linear-gradient(to bottom, #7FD1D5, #4D7FA3);
        /* Even lighter gradient */
        color: #ffffff;
    }
</style>

<script>
    function showDescription(index) {
        // Get the hidden description
        let desc = document.getElementById("desc-" + index).innerHTML;

        // Place it into the container below the grid
        document.getElementById("description-container").innerHTML = desc;
    }
</script>




<section data-aos-easing="ease-in-sine" class="service-carousel-section py-5">
    <div class="container d-flex justify-content-center">
        <div class="owl-carousel service-carousel">
            {% if departments %}
            {% for dept in departments %}
            {% if dept.is_active %}
            <a href="{{ url_for('department_page', slug=dept.slug) }}" class="item"
                style="--i: url('{{ url_for('static', filename=dept.icon_path) if dept.icon_path else url_for('static', filename='img/department/icons/default.svg') }}');"
                data-department="{{ dept.slug }}">
                {% if dept.icon_path %}
                <img class="dept-icon" loading="lazy" src="{{ url_for('static', filename=dept.icon_path) }}"
                    alt="{{ dept.name }}">
                {% else %}
                <img class="dept-icon" loading="lazy"
                    src="{{ url_for('static', filename='img/department/icons/default.svg') }}" alt="{{ dept.name }}">
                {% endif %}
                <div class="icon"></div>
                <h4 class="text-dark-blue my-md-3">{{ dept.name }}</h4>
            </a>
            {% endif %}
            {% endfor %}
            {% else %}
            <div class="alert alert-warning">
                No departments available.
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- scripts -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="/static/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script src="/static/js/script.js"></script>
<script>
    $(".book-apt").on('click', function () {
        var url = $(this).data("url");
        window.open(url, '_blank');
    });
    function showChromePopup() {
        const popup = document.getElementById("chrome-popup");
        popup.classList.add("is-visible");
        popup.setAttribute("aria-hidden", "false");
    }
    function hideChromePopup() {
        const popup = document.getElementById("chrome-popup");
        popup.classList.remove("is-visible");
        popup.setAttribute("aria-hidden", "true");
    }
    // ESC closes popup
    document.addEventListener("keydown", e => {
        if (e.key === "Escape") hideChromePopup();
    });
    document.addEventListener('DOMContentLoaded', function () {
        const scrollBtn = document.getElementById('scrollToTopBtn');
        const scrollThreshold = 300;

        function toggleScrollButton() {
            if (window.pageYOffset > scrollThreshold ||
                document.documentElement.scrollTop > scrollThreshold) {
                scrollBtn.style.display = 'flex';
            } else {
                scrollBtn.style.display = 'none';
            }
        }

        window.addEventListener('scroll', toggleScrollButton);

        scrollBtn.addEventListener('click', function (e) {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            // Add slight animation to the icon
            this.querySelector('i').style.transform = 'translateY(-4px)';
            setTimeout(() => {
                this.querySelector('i').style.transform = '';
            }, 300);
        });

        // Initialize on load
        toggleScrollButton();
    });
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileNav = document.getElementById('mobile-nav');

    mobileMenuToggle.addEventListener('click', function () {
        mobileNav.classList.toggle('active'); // toggles visibility
    });

</script>
<a href="#" id="scrollToTopBtn" class="scroll-to-top-btn" title="Scroll to top" aria-label="Scroll to top">
    <i class="fa fa-arrow-up"></i> <!-- Simple up arrow -->
</a>

<script> $(document).ready(function () { initDepartmentPageActions(); }) </script>
{% endblock %}